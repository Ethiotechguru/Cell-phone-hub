<%- include('./inc/head.ejs') %>
<link rel="stylesheet" href="/products.css">
</head>
<body>
    <%- include('./inc/navigation.ejs')%>
    </header>
        <div class="grid">
        <% if(products.length>0) {%> 
            <% products.forEach(p=>{%> 
                <article class="card_header">
                    <a href="/products/<%=p._id %> " class="see_detail"><h3 class="product_title"><%=p.title %> </h3></a>
                    <div class="card_image">
                        <a href="/products/<%=p._id %> " class="see_detail"><img src=<%=p.imgUrl %> alt="<%=p.title %> "></a>
                    </div>
                    <div class="card_content">
                        <h4 class="product_price">
                            $<%= p.price %> 
                        </h4>
                        <% if(p.description.length>40){%> 
                            <p class="product_description"><a class="see_detail" href="/products/<%=p._id %>"><%=p.description.substring(0,30)%>...</a> </p>
                        <% }else{ %>
                            <p class="product_description"><a class="see_detail" href="/products/<%=p._id %>"><%=p.description%></a></p>
                        <% } %> 
                    </div>
                    <div class="card_action">
                        <form  action="/cart" method="POST">
                            <button class="btn" type="submit">Add To Cart</button>
                            <input type="hidden" name ="cartItem" value="<%=p._id%> "/>
                        </form>
                        <a class="btn_detail" href="/products/<%=p._id%> ">Detail</a>
                    </div>
                </article>
            <% }) %> 
        <%}else{%>
            <h1 class="no_product">Product Not Found</h1>
        <% } %> 
    </div>
    <%-include('./inc/footer.ejs') %> 
